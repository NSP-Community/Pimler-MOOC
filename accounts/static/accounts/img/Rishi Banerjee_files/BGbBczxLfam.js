if (self.CavalryLogger) { CavalryLogger.start_js(["krylL"]); }

__d("PlaceListFeedAttachmentMapper",[],(function(a,b,c,d,e,f){var g={};a={registerPlaceListFeedAttachment:function(a,b){var c=g[a];!c?g[a]=[b]:c.push(b)},getFeedStoryDOMIDsForPostID:function(a){return g[a]||[]}};e.exports=a}),null);
__d("XPlaceListSpotlightController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/post/view_map/{post_id}/",{post_id:{type:"String",required:!0},uri:{type:"String"}})}),null);
__d("PlaceListPageTransitionsManager",["AsyncDialog","AsyncRequest","Layer","PageTransitionPriorities","PageTransitions","URI","XPlaceListSpotlightController","filterObject"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=!1,i={},j=new Set(["story_fbid","id","spotlight"]);a={registerForTransitions:function(a,c){c=this._getKeyForURI(new(b("URI"))(c));i[c]=a;this._registerHandler()},handleSpotlightClosed:function(){h&&!b("PageTransitions").isTransitioning()&&window.history.go(-1)},_registerHandler:function(){__p&&__p();if(g||!this._hasAnyPosts())return;g=!0;var a=this._getKeyForURI(b("PageTransitions").getNextURI());b("PageTransitions").registerHandler(function(c){__p&&__p();c=this._getKeyForURI(c);if(c in i){h=!0;this._handleTransition(i[c]);b("PageTransitions").transitionComplete(!0);return!0}else if(h&&c==a){h=!1;this._maybeCloseSpotlight();b("PageTransitions").transitionComplete(!0);return!0}else{g=!1;return!1}}.bind(this),b("PageTransitionPriorities").SOCIAL_SEARCH_DIALOG)},_getKeyForURI:function(a){var c=b("filterObject")(a.getQueryData(),function(a,b){return j.has(b)});return new(b("URI"))(a).setQueryData(c).getQualifiedURI().toString()},_handleTransition:function(a){a=b("XPlaceListSpotlightController").getURIBuilder().setString("post_id",a).getURI();a=new(b("AsyncRequest"))(a).setAbortHandler(function(){return this.handleSpotlightClosed()}.bind(this)).setErrorHandler(function(){return this.handleSpotlightClosed()}.bind(this)).setAllowCrossPageTransition();b("AsyncDialog").send(a)},_maybeCloseSpotlight:function(){var a=b("Layer").getTopmostLayer();a&&a.hide()},_hasAnyPosts:function(){return Object.keys(i).length>0}};e.exports=a}),null);
__d("PlaceListAttachmentController",["PlaceListFeedAttachmentMapper","PlaceListPageTransitionsManager"],(function(a,b,c,d,e,f){a={init:function(a,c){b("PlaceListFeedAttachmentMapper").registerPlaceListFeedAttachment(c.postID,a),b("PlaceListPageTransitionsManager").registerForTransitions(c.postID,c.postURI)}};e.exports=a}),null);